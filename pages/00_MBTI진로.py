# app.py
# Streamlit MBTI -> 진로 추천 앱
# 필요한 것: streamlit (추가 라이브러리 없음)
# 실행: streamlit run app.py

import streamlit as st
from typing import List, Dict

st.set_page_config(page_title="MBTI 진로 추천 🌱", page_icon="🔮", layout="centered")

# ----------------------------------------------------------
# 데이터: MBTI 타입 -> [(진로, 전공 리스트, 성격 설명), ... x2]
# (간단하고 청소년 친화적으로 작성)
# ----------------------------------------------------------
MBTI_CAREERS: Dict[str, List[Dict[str, object]]] = {
    "ISTJ": [
        {"career": "공무원 / 행정직", "majors": ["행정학", "정치외교학", "법학"], "fit": "책임감 있고 규칙을 잘 지키는 사람에게 딱! 성실함과 꼼꼼함이 장점이에요. 🧾"},
        {"career": "회계사 / 재무분석가", "majors": ["회계학", "경영학", "통계학"], "fit": "숫자, 규칙, 절차 다 좋아하는 타입. 실무 중심으로 일하기 편해요. 💼"}
    ],
    "ISFJ": [
        {"career": "간호사 / 보건의료직", "majors": ["간호학", "보건학", "의료행정"], "fit": "사람 돌보는 걸 좋아하는 듬직한 타입. 세심한 배려가 큰 무기예요. 💉❤️"},
        {"career": "교사(초등/특수)", "majors": ["교육학", "아동학", "특수교육"], "fit": "학생들 케어하면서 안정적으로 일할 수 있어요. 신뢰감 있는 선생님상! 🍎"}
    ],
    "INFJ": [
        {"career": "임상심리사 / 상담사", "majors": ["심리학", "상담학", "사회복지"], "fit": "사람 속마음 읽는 능력과 깊은 공감으로 보람을 느껴요. 🧠💬"},
        {"career": "콘텐츠 크리에이터(심층/예술)", "majors": ["문예창작", "미디어학", "심리학"], "fit": "가치 있는 메시지 전달하는 데 강해요. 창의적이고 의미 중심적! 🎨✨"}
    ],
    "INTJ": [
        {"career": "연구원 / 데이터 과학자", "majors": ["컴퓨터공학", "통계학", "물리/수학"], "fit": "논리적이고 계획 잘 세우니 연구·분석에 최적! 문제 해결형 스타일. 🔬📊"},
        {"career": "전략 컨설턴트", "majors": ["경영학", "산업공학", "경제학"], "fit": "큰 그림 보고 전략 세우는 걸 좋아해요. 독창적인 사고 강점! 🧭"}
    ],
    "ISTP": [
        {"career": "공학 기술자 / 메카트로닉스", "majors": ["기계공학", "전기공학", "메카트로닉스"], "fit": "손·머리 직접 쓰는 실무형, 문제 풀때 빠르고 효율적이에요. 🔧"},
        {"career": "파일럿 / 항공정비", "majors": ["항공운항", "항공정비", "기계공학"], "fit": "실전에서 판단 빠른 타입, 기술과 체력이 장점! ✈️"}
    ],
    "ISFP": [
        {"career": "디자이너(패션/그래픽)", "majors": ["시각디자인", "패션디자인", "산업디자인"], "fit": "감각적이고 표현력이 좋은 타입. 자유로운 창작에 행복해해요. 🎨👗"},
        {"career": "요리사 / 베이커", "majors": ["조리과학", "호텔관광", "식품영양학"], "fit": "손으로 만드는 걸 좋아하고 감성으로 맛을 더해요. 즉흥적 실험도 OK! 🍰👨‍🍳"}
    ],
    "INFP": [
        {"career": "작가 / 시나리오 작가", "majors": ["문예창작", "영문학", "미디어문예"], "fit": "내면 세계가 풍부하고 표현 욕구가 강해요. 감성으로 사람을 움직여요. ✍️📖"},
        {"career": "문화예술치료사", "majors": ["미술치료", "음악치료", "심리학"], "fit": "치유와 공감에 관심 많고 의미 만들기를 좋아해요. 🕊️"}
    ],
    "INTP": [
        {"career": "소프트웨어 개발자 / 연구 개발", "majors": ["컴퓨터공학", "소프트웨어학", "수학"], "fit": "논리적 탐구를 즐기고 시스템 설계에서 빛나는 타입. 🖥️🔍"},
        {"career": "학자 / 이론 연구자", "majors": ["수학", "물리학", "철학"], "fit": "깊게 파고들어 개념을 새로 만드는 걸 좋아해요. 독창적이고 분석적. 📚"}
    ],
    "ESTP": [
        {"career": "영업 / 마케팅", "majors": ["경영학", "광고홍보", "커뮤니케이션"], "fit": "사교적이고 행동파! 현장감각으로 성과 내는 타입. 🗣️💥"},
        {"career": "스타트업 창업가", "majors": ["경영학", "창업학", "디자인경영"], "fit": "위기에도 빠르게 대응하고 실행력이 강해요. 리스크 감수 OK! 🚀"}
    ],
    "ESFP": [
        {"career": "연예/퍼포먼스(배우·뮤지션)", "majors": ["연기학", "음악학", "무용"], "fit": "무대 위에서 에너지 뿜뿜! 사람들 앞에서 빛나는 타입. 🎤🌟"},
        {"career": "이벤트 기획 / 호스피탈리티", "majors": ["관광학", "이벤트학", "경영학"], "fit": "사람 모으고 분위기 만드는 걸 잘해요. 즉흥력 최고! 🎉"}
    ],
    "ENFP": [
        {"career": "PR / 콘텐츠 기획자", "majors": ["커뮤니케이션", "광고홍보", "미디어학"], "fit": "아이디어 톡톡, 사람과의 연결을 즐겨요. 창의력 폭발! 💡✨"},
        {"career": "사회혁신 / NGO 활동가", "majors": ["사회복지", "국제학", "사회학"], "fit": "가치 중심으로 움직이며 사람을 돕는 데 힘을 쏟음. 열정적! 🌍❤️"}
    ],
    "ENTP": [
        {"career": "제품기획(프로덕트 매니저)", "majors": ["경영학", "컴퓨터공학", "산업디자인"], "fit": "새 아이디어로 실험하고 빠르게 검증하는 걸 좋아해요. 토론도 즐김! 🧪🗣️"},
        {"career": "변호사(논리형) / 스타트업 코치", "majors": ["법학", "경제학", "경영학"], "fit": "말빨·논리로 설득 가능, 다양한 분야 도전 좋아함. ⚖️"}
    ],
    "ESTJ": [
        {"career": "프로젝트 매니저 / 운영관리", "majors": ["경영학", "산업공학", "경영정보학"], "fit": "체계적으로 팀을 이끌고 성과 내는 걸 좋아하는 타입. 조직 관리에 강함. 📋"},
        {"career": "금융권(IB/은행)", "majors": ["경제학", "경영학", "수학"], "fit": "규칙과 성과 중심, 실무능력으로 신뢰를 쌓는 스타일. 💳"}
    ],
    "ESFJ": [
        {"career": "HR / 교육기획", "majors": ["교육학", "심리학", "경영학"], "fit": "사람 돌보고 조율하는 데 탁월해요. 따뜻하고 실용적입니다. 🤝"},
        {"career": "의료 서비스 코디네이터", "majors": ["보건행정", "경영학", "사회복지"], "fit": "서비스 정신 + 체계적 운영 둘 다 잘할 수 있어요. 🏥"}
    ],
    "ENFJ": [
        {"career": "기업 내 조직문화 담당 / 리더십 코치", "majors": ["경영학", "심리학", "교육학"], "fit": "사람을 이끌고 성장시키는 데 즐거움을 느낌. 소통력이 장점! 🌱"},
        {"career": "외교관 / 국제기구", "majors": ["국제학", "외교학", "언어학"], "fit": "타인과의 협상·조율에 강하고 가치 중심적이에요. 🌐🤝"}
    ],
    "ENTJ": [
        {"career": "임원 / 경영전략가", "majors": ["경영학", "경제학", "산업공학"], "fit": "목표 지향적이고 리더십 발휘 좋아요. 큰 그림 그리는 타입! 🏢⚡"},
        {"career": "기술 스타트업 CEO", "majors": ["컴퓨터공학", "경영학", "전기전자"], "fit": "전략+실행 둘 다 소화 가능, 도전 정신 강함. 🚀"}
    ],
}

# ----------------------------------------------------------
# helper: 표시 포맷
# ----------------------------------------------------------
def render_career(card: Dict[str, object], idx: int):
    career = card["career"]
    majors = card["majors"]
    fit = card["fit"]
    st.markdown(f"### {idx}. {career} {'🎯' if idx==1 else '✨'}")
    with st.expander("관련 전공 보기 🔎"):
        st.write(", ".join(majors))
    st.write(fit)
    st.write("---")

# ----------------------------------------------------------
# UI
# ----------------------------------------------------------
st.title("🔮 MBTI 기반 1분 진로 추천기")
st.markdown("민우야, 원하는 MBTI를 골라줘! 내가 그 유형에 어울리는 **진로 2개**랑 전공·성격 팁을 알려줄게. 편하게 골라~ 😄")

mbti_list = list(MBTI_CAREERS.keys())
default_idx = 0
with st.sidebar:
    st.header("설정")
    chosen = st.selectbox("너의 MBTI를 선택해봐", mbti_list, index=default_idx)
    show_all = st.checkbox("모든 유형 설명 보기", value=False)
    st.write("앱 정보 · 사용법")
    st.info("MBTI는 참고용이야 — 너의 흥미와 경험이 더 중요해. 선택은 자유! ✌️")

# 메인 출력
if show_all:
    st.header("모든 MBTI별 추천 (한눈에 보기) 📚")
    for t in mbti_list:
        st.subheader(f"{t}")
        for i, card in enumerate(MBTI_CAREERS[t], start=1):
            st.write(f"- **{i}. {card['career']}** — 전공: {', '.join(card['majors'])}")
            st.write(f"  - {card['fit']}")
        st.write("---")
else:
    st.header(f"선택: {chosen} 🔍")
    careers = MBTI_CAREERS.get(chosen, [])
    if not careers:
        st.write("아직 데이터가 없네... 다른 유형 골라줄래? 🙏")
    else:
        st.markdown("아래 두 가지 진로를 추천할게. 각각 전공과 어떤 성격이 잘 맞는지도 같이 봐봐!")
        for i, card in enumerate(careers, start=1):
            render_career(card, i)

st.markdown("**팁**: 전공은 길고, 커리어는 바뀔 수 있어. 복수 전공·부전공·인턴으로 직접 경험해보는 걸 강추! 🚀")
st.caption("이 앱은 참고용이며, 구체적 진로 상담은 학교 진로상담실이나 멘토와 직접 상담하세요. 🤝")
